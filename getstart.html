<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Getting started &mdash; ns_doc 1 documentation</title>
    
    <link rel="stylesheet" href="_static/sphinxdoc.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="top" title="ns_doc 1 documentation" href="index.html" />
    <link rel="next" title="pymatnest module" href="ns_run.html" />
    <link rel="prev" title="Installation and quick start guide" href="install.html" /> 
  </head>
  <body role="document">
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="ns_run.html" title="pymatnest module"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="install.html" title="Installation and quick start guide"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">ns_doc 1 documentation</a> &raquo;</li> 
      </ul>
    </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Getting started</a><ul>
<li><a class="reference internal" href="#list-of-input-parameters">List of input parameters</a></li>
<li><a class="reference internal" href="#example-input-files">Example input files</a><ul>
<li><a class="reference internal" href="#cluster-with-the-supplied-fortran-code-lennard-jones-potential-using-mc">Cluster with the supplied fortran code Lennard-Jones potential, using MC</a></li>
<li><a class="reference internal" href="#cluster-with-quip-implemented-lennard-jones-potential-using-md">Cluster with <code class="docutils literal"><span class="pre">QUIP</span></code> implemented Lennard-Jones potential, using MD</a></li>
<li><a class="reference internal" href="#periodic-lennard-jones-system-with-lammps-using-md">Periodic Lennard-Jones system with <code class="docutils literal"><span class="pre">LAMMPS</span></code>, using MD</a></li>
<li><a class="reference internal" href="#periodic-binary-lennard-jones-system-with-lammps-using-md">Periodic binary Lennard-Jones system with <code class="docutils literal"><span class="pre">LAMMPS</span></code>, using MD</a></li>
</ul>
</li>
<li><a class="reference internal" href="#some-tips-on-setting-the-input-parameters">Some tips on setting the input parameters</a><ul>
<li><a class="reference internal" href="#minimum-lattice-height-mc-cell-min-aspect-ratio">Minimum lattice height: <code class="docutils literal"><span class="pre">MC_cell_min_aspect_ratio</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#restart-a-run">Restart a run</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="install.html"
                        title="previous chapter">Installation and quick start guide</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="ns_run.html"
                        title="next chapter"><cite>pymatnest</cite> module</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/getstart.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <div><input type="text" name="q" /></div>
      <div><input type="submit" value="Go" /></div>
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="getting-started">
<h1>Getting started<a class="headerlink" href="#getting-started" title="Permalink to this headline">¶</a></h1>
<div class="section" id="list-of-input-parameters">
<h2>List of input parameters<a class="headerlink" href="#list-of-input-parameters" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="example-input-files">
<h2>Example input files<a class="headerlink" href="#example-input-files" title="Permalink to this headline">¶</a></h2>
<div class="section" id="cluster-with-the-supplied-fortran-code-lennard-jones-potential-using-mc">
<h3>Cluster with the supplied fortran code Lennard-Jones potential, using MC<a class="headerlink" href="#cluster-with-the-supplied-fortran-code-lennard-jones-potential-using-mc" title="Permalink to this headline">¶</a></h3>
<p>This input file will start a calculation of 6 Lennard-Jones atoms
in a cubic cell with volume 648 Angstrom^3, using the potential implemented in the supplied fortran routine,
and using MC trajectory for generating a new sample configuration. As the shape
and volume of the cell will not be changed, a cluster will be formed by the atoms.
Note that the input parameters given below, such as the number of walkers and length of trajectory,
are for a short test run. For six atoms this calcualtion should take only a couple of minutes on one processor, and although
the calculation should end up in the global minimum octahedral cluster structure,
thermodynamic variables will not be necessarily well converged.</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="c1"># starting volume (in this example it is Angstrom^3)</span>
<span class="n">max_volume_per_atom</span><span class="o">=</span><span class="mf">108.0</span>
<span class="c1"># 6 atoms with atomic number 1 and mass 1.0</span>
<span class="n">start_species</span><span class="o">=</span><span class="mi">1</span> <span class="mi">6</span> <span class="mf">1.0</span>
<span class="n">start_energy_ceiling</span><span class="o">=</span><span class="mf">1.0e9</span>

<span class="c1"># size of live set</span>
<span class="n">n_walkers</span><span class="o">=</span><span class="mi">128</span>
<span class="c1"># at each iteration 1 walker is killed (n_cull=1 is strongly recommended)</span>
<span class="n">n_cull</span><span class="o">=</span><span class="mi">1</span>
<span class="c1"># total number of iterations will be n_iter_per_walker*n_walkers/n_cull</span>
<span class="n">n_iter_times_fraction_killed</span><span class="o">=</span><span class="mi">100</span>
<span class="c1"># prefix of all the output files</span>
<span class="n">out_file_prefix</span><span class="o">=</span><span class="n">test</span><span class="o">.</span><span class="n">cluster</span><span class="o">.</span><span class="n">MC</span><span class="o">.</span><span class="n">fortran</span>

<span class="c1"># use MC generating a new walker</span>
<span class="n">atom_algorithm</span><span class="o">=</span><span class="n">MC</span>
<span class="n">n_model_calls_expected</span><span class="o">=</span><span class="mi">3</span>      
<span class="n">n_atom_steps</span><span class="o">=</span><span class="mi">5</span>                
<span class="c1"># length of atomic trajectory in each step</span>
<span class="n">atom_traj_len</span><span class="o">=</span><span class="mi">5</span>               
<span class="c1"># number of cell volume steps (zero as the cell should not change for the cluster)</span>
<span class="n">n_cell_volume_steps</span><span class="o">=</span><span class="mi">0</span>         
<span class="c1"># number of cell shear steps (zero as the cell should not change for the cluster)</span>
<span class="n">n_cell_shear_steps</span><span class="o">=</span><span class="mi">0</span>          
<span class="c1"># number of cell strectch steps (zero as the cell should not change for the cluster)</span>
<span class="n">n_cell_stretch_steps</span><span class="o">=</span><span class="mi">0</span>        


<span class="n">MC_atom_step_size</span><span class="o">=</span><span class="mf">5.0</span>
<span class="n">MC_atom_step_size_max</span><span class="o">=</span><span class="mf">5.0</span>

<span class="n">FORTRAN_model</span><span class="o">=</span><span class="n">example_LJ_min_image_model</span><span class="o">.</span><span class="n">so</span>
<span class="c1"># use the supplied fortran code</span>
<span class="n">energy_calculator</span><span class="o">=</span><span class="n">fortran</span>

<span class="n">rng</span><span class="o">=</span><span class="n">numpy</span>

<span class="c1"># verbosity level</span>
<span class="n">debug</span><span class="o">=</span><span class="mi">0</span>
</pre></div>
</div>
</div>
<div class="section" id="cluster-with-quip-implemented-lennard-jones-potential-using-md">
<h3>Cluster with <code class="docutils literal"><span class="pre">QUIP</span></code> implemented Lennard-Jones potential, using MD<a class="headerlink" href="#cluster-with-quip-implemented-lennard-jones-potential-using-md" title="Permalink to this headline">¶</a></h3>
<p>This input file will start a calculation of 6 Lennard-Jones atoms
in a cubic cell with volume 648 Angstrom^3, using the potential implemented in <code class="docutils literal"><span class="pre">QUIP</span></code>
and using MD trajectory for generating a new sample configuration. As the shape
and volume of the cell will not be changed, a cluster will be formed by the atoms.</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="c1"># starting volume (in this example it is Angstrom^3)</span>
<span class="n">max_volume_per_atom</span><span class="o">=</span><span class="mf">108.0</span>     
<span class="c1"># 6 atoms with atomic number 1 and mass 1.0</span>
<span class="n">start_species</span><span class="o">=</span><span class="mi">1</span> <span class="mi">6</span> <span class="mf">1.0</span>        
<span class="n">start_energy_ceiling</span><span class="o">=</span><span class="mf">40.0</span>

<span class="c1"># size of live set</span>
<span class="n">n_walkers</span><span class="o">=</span><span class="mi">256</span>                 
<span class="c1"># at each iteration 1 walker is killed</span>
<span class="n">n_cull</span><span class="o">=</span><span class="mi">1</span>                      
<span class="c1"># total number of iterations will be n_iter_per_walker*n_walker/n_cull</span>
<span class="n">n_iter_times_fraction_killed</span><span class="o">=</span><span class="mi">150</span>         
<span class="c1"># prefix of all the output files</span>
<span class="n">out_file_prefix</span><span class="o">=</span><span class="n">test</span><span class="o">.</span><span class="n">cluster</span><span class="o">.</span><span class="n">MD</span><span class="o">.</span><span class="n">quip</span>   

<span class="c1"># use MD generating a new walker</span>
<span class="n">atom_algorithm</span><span class="o">=</span><span class="n">MD</span>             
<span class="n">n_model_calls_expected</span><span class="o">=</span><span class="mi">3</span>      
<span class="n">n_atom_steps</span><span class="o">=</span><span class="mi">5</span>                
<span class="c1"># length of atomic trajectory in each step</span>
<span class="n">atom_traj_len</span><span class="o">=</span><span class="mi">5</span>               
<span class="c1"># number of cell volume steps</span>
<span class="n">n_cell_volume_steps</span><span class="o">=</span><span class="mi">0</span>         
<span class="c1"># number of cell shear steps</span>
<span class="n">n_cell_shear_steps</span><span class="o">=</span><span class="mi">0</span>          
<span class="c1"># number of cell strectch steps</span>
<span class="n">n_cell_stretch_steps</span><span class="o">=</span><span class="mi">0</span>        

<span class="n">MD_atom_timestep</span><span class="o">=</span><span class="mf">0.01</span>
<span class="n">MD_atom_timestep_max</span><span class="o">=</span><span class="mf">1.0</span>  
<span class="n">MD_adjust_max_rate</span><span class="o">=</span><span class="mf">0.95</span>
<span class="n">MD_adjust_min_rate</span><span class="o">=</span><span class="mf">0.5</span>

<span class="c1"># param file to store potential parameters</span>
<span class="n">QUIP_pot_params_file</span><span class="o">=</span><span class="n">quip_params</span><span class="o">.</span><span class="n">cluster</span><span class="o">.</span><span class="n">xml</span> 
<span class="c1"># Lennard-Jones potential</span>
<span class="n">QUIP_pot_args</span><span class="o">=</span><span class="n">IP</span> <span class="n">LJ</span>           

<span class="c1"># use QUIP</span>
<span class="n">energy_calculator</span><span class="o">=</span><span class="n">quip</span>        

<span class="n">rng</span><span class="o">=</span><span class="n">numpy</span>

<span class="c1"># verbosity level</span>
<span class="n">debug</span><span class="o">=</span><span class="mi">0</span>                       
</pre></div>
</div>
<p>The corresponding <code class="docutils literal"><span class="pre">quip_params.cluster.xml</span></code> file is the following:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>&lt;LJ_params n_types=&quot;1&quot; label=&quot;default&quot;&gt;
&lt;!-- dummy paramters for testing purposes, no physical meaning --&gt;
&lt;per_type_data type=&quot;1&quot; atomic_num=&quot;1&quot; /&gt;
&lt;per_pair_data type1=&quot;1&quot; type2=&quot;1&quot; sigma=&quot;1.0&quot; eps6=&quot;1.0&quot; eps12=&quot;1.0&quot; cutoff=&quot;3.0&quot; energy_shift=&quot;T&quot; linear_force_shift=&quot;F&quot; /&gt;
&lt;/LJ_params&gt;
</pre></div>
</div>
</div>
<div class="section" id="periodic-lennard-jones-system-with-lammps-using-md">
<h3>Periodic Lennard-Jones system with <code class="docutils literal"><span class="pre">LAMMPS</span></code>, using MD<a class="headerlink" href="#periodic-lennard-jones-system-with-lammps-using-md" title="Permalink to this headline">¶</a></h3>
<p>This input file will start a calculation of 64 Lennard-Jones atoms
in a cell with variable shape and size at the set pressure value, using the potential implemented in <code class="docutils literal"><span class="pre">LAMMPS</span></code>
and using MD trajectory for generating a new sample configuration.</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="c1"># starting volume (in this example it is Angstrom^3)</span>
<span class="n">max_volume_per_atom</span><span class="o">=</span><span class="mf">1000000.0</span>

<span class="c1"># 64 atoms with atomic number 1 and mass 1.0</span>
<span class="n">start_species</span><span class="o">=</span><span class="mi">1</span> <span class="mi">64</span> <span class="mf">1.0</span>
<span class="n">start_energy_ceiling</span><span class="o">=</span><span class="mf">100.0</span>

<span class="c1"># size of live set</span>
<span class="n">n_walkers</span><span class="o">=</span><span class="mi">256</span>
<span class="c1"># at each iteration 1 walker is killed</span>
<span class="n">n_cull</span><span class="o">=</span><span class="mi">1</span>
<span class="c1"># total number of iterations will be n_iter_per_walker*n_walkers</span>
<span class="n">n_iter_times_fraction_killed</span><span class="o">=</span><span class="mi">5000</span>
<span class="c1"># prefix of all the output files</span>
<span class="n">out_file_prefix</span><span class="o">=</span><span class="n">test</span><span class="o">.</span><span class="n">periodic</span><span class="o">.</span><span class="n">MD</span><span class="o">.</span><span class="n">lammps</span>


<span class="c1"># use MD generating a new walker</span>
<span class="n">atom_algorithm</span><span class="o">=</span><span class="n">MD</span>
<span class="n">n_model_calls_expected</span><span class="o">=</span><span class="mi">8</span>      
<span class="n">n_atom_steps</span><span class="o">=</span><span class="mi">5</span>                
<span class="c1"># length of atomic trajectory in each step</span>
<span class="n">atom_traj_len</span><span class="o">=</span><span class="mi">5</span>               
<span class="c1"># number of cell volume steps</span>
<span class="n">n_cell_volume_steps</span><span class="o">=</span><span class="mi">3</span>         
<span class="c1"># number of cell shear steps</span>
<span class="n">n_cell_shear_steps</span><span class="o">=</span><span class="mi">2</span>          
<span class="c1"># number of cell strectch steps</span>
<span class="n">n_cell_stretch_steps</span><span class="o">=</span><span class="mi">2</span>        

<span class="n">MD_atom_timestep</span><span class="o">=</span><span class="mf">0.01</span>
<span class="n">MD_atom_timestep_max</span><span class="o">=</span><span class="mf">0.025</span>
<span class="n">MD_adjust_max_rate</span><span class="o">=</span><span class="mf">0.95</span>
<span class="n">MD_adjust_min_rate</span><span class="o">=</span><span class="mf">0.5</span>

<span class="c1"># Pressure (in the units of the potential)                                      </span>
<span class="n">MC_cell_P</span><span class="o">=</span><span class="mf">2.37e-2</span>

<span class="c1"># allowed torsion for the cell, ratio of the min lattice height</span>
<span class="n">MC_cell_min_aspect_ratio</span><span class="o">=</span><span class="mf">0.9</span>

<span class="c1"># use LAMMPS</span>
<span class="n">energy_calculator</span><span class="o">=</span><span class="n">lammps</span>
<span class="c1"># name of the LAMMPS machine (the one that *YOUR* LAMMPS was built with)</span>
<span class="n">LAMMPS_name</span><span class="o">=</span><span class="n">mpi</span>
<span class="c1"># potential parameters</span>
<span class="n">LAMMPS_init_cmds</span><span class="o">=</span><span class="n">pair_style</span> <span class="n">lj</span><span class="o">/</span><span class="n">cut</span> <span class="mf">9.00</span><span class="p">;</span> <span class="n">pair_coeff</span> <span class="o">*</span> <span class="o">*</span> <span class="mf">0.1</span> <span class="mf">3.0</span><span class="p">;</span> <span class="n">pair_modify</span> <span class="n">shift</span> <span class="n">yes</span>
<span class="n">LAMMPS_atom_types</span><span class="o">=</span><span class="n">H</span> <span class="mi">1</span>

<span class="n">rng</span><span class="o">=</span><span class="n">numpy</span>

<span class="c1"># verbosity level</span>
<span class="n">debug</span><span class="o">=</span><span class="mi">0</span>
</pre></div>
</div>
</div>
<div class="section" id="periodic-binary-lennard-jones-system-with-lammps-using-md">
<h3>Periodic binary Lennard-Jones system with <code class="docutils literal"><span class="pre">LAMMPS</span></code>, using MD<a class="headerlink" href="#periodic-binary-lennard-jones-system-with-lammps-using-md" title="Permalink to this headline">¶</a></h3>
<p>This input file will start a calculation of a binary Lennard-Jones system, with 32 A-type atoms and 32 B-type atoms.
Note that in case of multicomponent systems swap moves have to be introduced, when the coordinates of different atomic types are swapped.
The cell is of variable shape and size at the set pressure value, using the potential implemented in <code class="docutils literal"><span class="pre">LAMMPS</span></code>
and using MD trajectory for generating a new sample configuration.
The input parameters in this example, such as the number of walkers and the length of the trajectory, will lead to a longer run producing converged results.</p>
</div>
</div>
<div class="section" id="some-tips-on-setting-the-input-parameters">
<h2>Some tips on setting the input parameters<a class="headerlink" href="#some-tips-on-setting-the-input-parameters" title="Permalink to this headline">¶</a></h2>
<div class="section" id="minimum-lattice-height-mc-cell-min-aspect-ratio">
<h3>Minimum lattice height: <code class="docutils literal"><span class="pre">MC_cell_min_aspect_ratio</span></code><a class="headerlink" href="#minimum-lattice-height-mc-cell-min-aspect-ratio" title="Permalink to this headline">¶</a></h3>
<p>The fully flexible cell is introduced to remove the finite size effect whereby
it may not be possible to arrange a fixed number of particles
in a fixed shape cell into certain crystal structures. In unfortunate cases this can exclude
thermodynamically relevant structures from the results of the calculation.
But for a flexible cell and for a finite number of particles, there exist simulation cells such that parallel
faces of the cell are separated by only a few layers of atoms, and those does not approximate the infinite fluid
in three dimensions. This problem can be solved by the introduction of a “minimum cell height” parameter.</p>
<p>The effect of the chosen minimum cell height is demonstrated in the case of the periodic system of
64 Lennard-Jonesium particles in the figure below. The legend on the right shows the value of
<code class="docutils literal"><span class="pre">MC_cell_min_aspect_ratio</span></code> used in each simulation. The peak at lower temperature corresponds to melting,
and the peak at higher temperature to evaporation. The location of
the evaporation transition is converged for <code class="docutils literal"><span class="pre">MC_cell_min_aspect_ratio</span></code> ≥ 0.35, but melting requires
a higher <code class="docutils literal"><span class="pre">MC_cell_min_aspect_ratio</span></code> ≥ 0.65.  At low values of <code class="docutils literal"><span class="pre">MC_cell_min_aspect_ratio</span></code> the
system’s behaviour is dominated by the fictitious periodicity imposed by the boundary
conditions.
(source: R. J. N. Baldock, <em>Classical Statistical Mechanics with Nested Sampling</em>, Ph.D. thesis, University of Cambridge (2014).)</p>
<div class="figure align-center">
<a class="reference internal image-reference" href="_images/doc_figure_mlh.jpg"><img alt="_images/doc_figure_mlh.jpg" src="_images/doc_figure_mlh.jpg" style="width: 500px;" /></a>
</div>
</div>
</div>
<div class="section" id="restart-a-run">
<h2>Restart a run<a class="headerlink" href="#restart-a-run" title="Permalink to this headline">¶</a></h2>
<p>If one needs to continue a run, i.e. perform more iteration cycles, the input file has to be modified as</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="c1">#start_species=1 64 1.0</span>
<span class="n">restart_file</span><span class="o">=</span><span class="n">my_output</span><span class="o">.</span><span class="n">snapshot</span><span class="o">.</span><span class="n">all</span><span class="o">.</span><span class="n">extxyz</span>
</pre></div>
</div>
<p>Comment out the <code class="docutils literal"><span class="pre">start_species</span></code> option and include a keyword <code class="docutils literal"><span class="pre">restart_file</span></code>. This defines the name of the file
where all the walker configurations can be read from. This file should be a produced by
concatenating the last saved snapshot files of all the processors. You might also need to increase the <code class="docutils literal"><span class="pre">n_iter_per_walker</span></code>
value if the run already reached the number of iterations set previously.</p>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="ns_run.html" title="pymatnest module"
             >next</a> |</li>
        <li class="right" >
          <a href="install.html" title="Installation and quick start guide"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">ns_doc 1 documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &copy; Copyright 2015, livia.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.4.4.
    </div>
  </body>
</html>